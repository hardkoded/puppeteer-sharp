[
  {
    "comment": "Firefox BiDi doesn't support browserURL connection because it doesn't expose the /json/version CDP endpoint. https://bugzilla.mozilla.org/show_bug.cgi?id=1862018",
    "testIdPattern": "[connect.spec] Puppeteer.connect should be able to connect using browserUrl, with and without trailing slash",
    "platforms": ["darwin", "linux", "win32"],
    "parameters": ["firefox", "webDriverBiDi"],
    "expectations": ["FAIL"]
  },
  {
    "comment": "Firefox BiDi only supports one session per browser - cannot connect to an already-connected browser. https://bugzilla.mozilla.org/show_bug.cgi?id=1862018",
    "testIdPattern": "[browser.spec] Browser.isConnected should set the browser connected state",
    "platforms": ["darwin", "linux", "win32"],
    "parameters": ["firefox", "webDriverBiDi"],
    "expectations": ["FAIL"]
  },
  {
    "comment": "Test uses CDP-specific WaitEvent with Page.loadEventFired which is not supported in BiDi",
    "testIdPattern": "[target.spec] Target should not crash while redirecting if original request was missed",
    "platforms": ["darwin", "linux", "win32"],
    "parameters": ["webDriverBiDi"],
    "expectations": ["SKIP"]
  },
  {
    "comment": "Custom query handlers are not yet fully implemented in BiDi",
    "testIdPattern": "[elementhandle.spec] ElementHandle specs Custom queries *",
    "platforms": ["darwin", "linux", "win32"],
    "parameters": ["webDriverBiDi"],
    "expectations": ["SKIP"]
  },
  {
    "comment": "Test launches a new headful browser which times out in BiDi",
    "testIdPattern": "[elementhandle.spec] PuppeteerSharp should work headful",
    "platforms": ["darwin", "linux", "win32"],
    "parameters": ["webDriverBiDi"],
    "expectations": ["SKIP"]
  },
  {
    "comment": "Firefox BiDi doesn't send BeforeRequestSent events for reload commands when interception is enabled. See: https://bugzilla.mozilla.org/show_bug.cgi?id=1879948",
    "testIdPattern": "[requestinterception.spec] request interception Page.setRequestInterception should properly return navigation response when URL has cookies",
    "platforms": ["darwin", "linux", "win32"],
    "parameters": ["firefox", "webDriverBiDi"],
    "expectations": ["SKIP"]
  },
  {
    "comment": "Firefox BiDi sends duplicate beforeRequestSent events with different request IDs for speculative/parallel loading during navigation",
    "testIdPattern": "[requestinterception.spec] request interception Page.setRequestInterception should be abortable",
    "platforms": ["darwin", "linux", "win32"],
    "parameters": ["firefox", "webDriverBiDi"],
    "expectations": ["FAIL"]
  },
  {
    "comment": "Firefox BiDi sends duplicate beforeRequestSent events with different request IDs for speculative/parallel loading during navigation",
    "testIdPattern": "[requestinterception.spec] request interception Page.setRequestInterception should work with encoded server - 2",
    "platforms": ["darwin", "linux", "win32"],
    "parameters": ["firefox", "webDriverBiDi"],
    "expectations": ["FAIL"]
  },
  {
    "comment": "Firefox BiDi sends duplicate beforeRequestSent events with different request IDs for speculative/parallel loading during navigation",
    "testIdPattern": "[requestinterception.spec] request interception Page.setRequestInterception should work with redirects for subresources",
    "platforms": ["darwin", "linux", "win32"],
    "parameters": ["firefox", "webDriverBiDi"],
    "expectations": ["FAIL"]
  },
  {
    "testIdPattern": "[network.spec] PuppeteerSharp network*",
    "platforms": ["darwin", "linux", "win32"],
    "parameters": ["cdp", "firefox"],
    "expectations": ["FAIL"],
    "comment": "The should work tests are being ignore upstream, the PuppeteerSharp ones are based on the same one."
  },
  {
    "comment": "We have a different test that needs to run on windows",
    "testIdPattern": "[chrome-data.spec] Chrome should resolve system executable path (windows)",
    "platforms": ["darwin", "linux"],
    "parameters": [],
    "expectations": ["SKIP"]
  },
  {
    "comment": "Remove when https://github.com/hardkoded/puppeteer-sharp/issues/2450 is implemented",
    "testIdPattern": "[elementhandle.spec] ElementHandle specs ElementHandle.boundingBox *",
    "platforms": ["darwin", "linux", "win32"],
    "parameters": ["firefox"],
    "expectations": ["FAIL"]
  },
  {
    "comment": "Remove when https://github.com/hardkoded/puppeteer-sharp/issues/2450 is implemented",
    "testIdPattern": "[elementhandle.spec] ElementHandle specs ElementHandle.boxModel *",
    "platforms": ["darwin", "linux", "win32"],
    "parameters": ["firefox"],
    "expectations": ["FAIL"]
  },
  {
    "comment": "TODO It's failing on CI/CD",
    "testIdPattern": "[fixtures.spec] Fixtures should dump browser process stderr",
    "platforms": ["darwin", "linux", "win32"],
    "parameters": ["firefox"],
    "expectations": ["FAIL"]
  },
  {
    "comment": "TODO Review why is failing on Ci/CD",
    "testIdPattern": "[launcher.spec] Launcher specs Puppeteer Puppeteer.connect should be able to reconnect",
    "platforms": ["darwin", "linux", "win32"],
    "parameters": ["firefox"],
    "expectations": ["FAIL"]
  },
  {
    "comment": "TODO Review why is failing on Ci/CD",
    "testIdPattern": "[headful.spec] headful tests HEADFUL headless should be able to read cookies written by headful",
    "platforms": ["darwin", "linux", "win32"],
    "parameters": ["firefox"],
    "expectations": ["FAIL"]
  },
  {
    "comment": "TODO Review why is failing on Ci/CD",
    "testIdPattern": "[headful.spec] headful tests HEADFUL headless should be able to read cookies written by headful",
    "platforms": ["darwin", "linux", "win32"],
    "parameters": ["chrome"],
    "expectations": ["FAIL"]
  },
  {
    "comment": "TODO Review why is failing on Ci/CD",
    "testIdPattern": "[launcher.spec] Launcher specs Puppeteer Puppeteer.launch userDataDir option should restore state",
    "platforms": ["darwin", "linux", "win32"],
    "parameters": ["firefox"],
    "expectations": ["FAIL"]
  },
  {
    "comment": "TODO Review screencasts in firefox",
    "testIdPattern": "[puppeteer-sharp] Screencast*",
    "platforms": ["linux", "win32"],
    "parameters": ["firefox"],
    "expectations": ["FAIL"]
  },
  {
    "comment": "TODO Review screenshots in firefox",
    "testIdPattern": "[screenshot.spec] *",
    "platforms": ["darwin", "linux", "win32"],
    "parameters": ["firefox"],
    "expectations": ["FAIL"]
  },
  {
    "comment": "This is passing on my machine but failing on CI/CD",
    "testIdPattern": "[click.spec] Page.click should fire aux event on middle click",
    "platforms": ["win32"],
    "parameters": ["firefox", "headful"],
    "expectations": ["FAIL"]
  },
  {
    "comment": "This is flaky on CI/CD",
    "testIdPattern": "[worker.spec] Workers Page.workers",
    "platforms": ["darwin", "linux", "win32"],
    "parameters": ["chrome"],
    "expectations": ["FAIL"]
  },
  {
    "comment": "This is passing on my machine but failing on CI/CD",
    "testIdPattern": "*should take fullPage screenshots*",
    "platforms": ["linux"],
    "parameters": ["firefox", "headless"],
    "expectations": ["FAIL"]
  },
  {
    "comment": "This is passing on my machine but failing on CI/CD",
    "testIdPattern": "*should work when reload causes history API in beforeunload*",
    "platforms": ["linux"],
    "parameters": ["firefox"],
    "expectations": ["FAIL"]
  },
  {
    "comment": "",
    "testIdPattern": "[puppeteer-sharp] *",
    "platforms": ["darwin", "linux", "win32"],
    "parameters": ["firefox"],
    "expectations": ["FAIL"]
  },
  {
    "comment": "This is part of organizing the webdriver bidi implementation, We will remove it one by one",
    "testIdPattern": "[requestinterception-experimental.spec] *",
    "platforms": [
      "darwin",
      "linux",
      "win32"
    ],
    "parameters": [
      "webDriverBiDi"
    ],
    "expectations": [
      "FAIL"
    ]
  },
  {
    "comment": "This is part of organizing the webdriver bidi implementation, We will remove it one by one",
    "testIdPattern": "[waittask.spec] *",
    "platforms": [
      "darwin",
      "linux",
      "win32"
    ],
    "parameters": [
      "webDriverBiDi"
    ],
    "expectations": [
      "FAIL"
    ]
  },
  {
    "comment": "This is part of organizing the webdriver bidi implementation, We will remove it one by one",
    "testIdPattern": "[ChromeLauncher.test.ts] *",
    "platforms": [
      "darwin",
      "linux",
      "win32"
    ],
    "parameters": [
      "webDriverBiDi"
    ],
    "expectations": [
      "FAIL"
    ]
  },
  {
    "comment": "This is part of organizing the webdriver bidi implementation, We will remove it one by one",
    "testIdPattern": "[NetworkManager.test.ts] *",
    "platforms": [
      "darwin",
      "linux",
      "win32"
    ],
    "parameters": [
      "webDriverBiDi"
    ],
    "expectations": [
      "FAIL"
    ]
  },
  {
    "comment": "This is part of organizing the webdriver bidi implementation, We will remove it one by one",
    "testIdPattern": "[puppeteer-sharp.spec.ts] PuppeteerSharp *",
    "platforms": [
      "darwin",
      "linux",
      "win32"
    ],
    "parameters": [
      "webDriverBiDi"
    ],
    "expectations": [
      "FAIL"
    ]
  },
  {
    "comment": "Firefox BiDi doesn't support multiple sessions on the same browser",
    "testIdPattern": "[browser.spec] Browser.process should not return child_process for remote browser",
    "platforms": [
      "darwin",
      "linux",
      "win32"
    ],
    "parameters": [
      "firefox",
      "webDriverBiDi"
    ],
    "expectations": [
      "SKIP"
    ]
  },
  {
    "comment": "FrameElementAsync times out for OOPIF frames in Firefox BiDi due to script evaluation issues",
    "testIdPattern": "[oopif.spec] OOPIF should load oopif iframes with subresources and request interception",
    "platforms": [
      "darwin",
      "linux",
      "win32"
    ],
    "parameters": [
      "firefox",
      "webDriverBiDi"
    ],
    "expectations": [
      "FAIL"
    ]
  },
  {
    "comment": "Firefox BiDi doesn't fire navigation/historyUpdated events for same-document (hash) navigations in OOPIFs",
    "testIdPattern": "[oopif.spec] OOPIF should support frames within OOP iframes",
    "platforms": [
      "darwin",
      "linux",
      "win32"
    ],
    "parameters": [
      "firefox",
      "webDriverBiDi"
    ],
    "expectations": [
      "FAIL"
    ]
  },
  {
    "comment": "BiDi driver doesn't support custom transport factories",
    "testIdPattern": "[launcher.spec] Launcher specs Browser.close should support custom transport",
    "platforms": ["darwin", "linux", "win32"],
    "parameters": ["webDriverBiDi"],
    "expectations": ["SKIP"]
  },
  {
    "comment": "BiDi driver doesn't support custom WebSocket factories",
    "testIdPattern": "[launcher.spec] PuppeteerSharp should support custom websocket",
    "platforms": ["darwin", "linux", "win32"],
    "parameters": ["webDriverBiDi"],
    "expectations": ["SKIP"]
  },
  {
    "comment": "BiDi throws WebDriverBiDiException instead of TargetClosedException when browser is closed",
    "testIdPattern": "[launcher.spec] Launcher specs Puppeteer Puppeteer.launch should reject all promises when browser is closed",
    "platforms": ["darwin", "linux", "win32"],
    "parameters": ["webDriverBiDi"],
    "expectations": ["SKIP"]
  },
  {
    "comment": "BiDi does not provide RemoteAddress information. Test fails on IP address validation. Matches upstream [network.spec] network Response.remoteAddress * expectation",
    "testIdPattern": "[network.spec] network Network Events Page.Events.Response",
    "platforms": ["darwin", "linux", "win32"],
    "parameters": ["webDriverBiDi"],
    "expectations": ["FAIL"]
  },
  {
    "comment": "Firefox BiDi does not send network events for cached stylesheets. https://bugzilla.mozilla.org/show_bug.cgi?id=1879438",
    "testIdPattern": "[network.spec] network Network Events Page.Events.RequestServedFromCache",
    "platforms": ["darwin", "linux", "win32"],
    "parameters": ["firefox", "webDriverBiDi"],
    "expectations": ["FAIL"]
  },
  {
    "comment": "BiDi does not provide RemoteAddress information. Test fails on redirect chain RemoteAddress.Port validation. Matches upstream [network.spec] network Response.remoteAddress * expectation",
    "testIdPattern": "[network.spec] network Network Events should support redirects",
    "platforms": ["darwin", "linux", "win32"],
    "parameters": ["webDriverBiDi"],
    "expectations": ["FAIL"]
  },
  {
    "comment": "Firefox BiDi sends duplicate BeforeRequestSent events with different request IDs for speculative/parallel loading during navigation, causing duplicate RequestFailed events",
    "testIdPattern": "[network.spec] network Network Events Page.Events.RequestFailed",
    "platforms": ["darwin", "linux", "win32"],
    "parameters": ["firefox", "webDriverBiDi"],
    "expectations": ["FAIL"]
  },
  {
    "comment": "BiDi doesn't support fetching post data from requests - PuppeteerSharp-specific test",
    "testIdPattern": "[network.spec] network Request.postData should work plain text",
    "platforms": ["darwin", "linux", "win32"],
    "parameters": ["webDriverBiDi"],
    "expectations": ["FAIL"]
  },
  {
    "comment": "BiDi doesn't support fetching post data from requests - PuppeteerSharp-specific test",
    "testIdPattern": "[network.spec] network Request.postData should work with low surrogate",
    "platforms": ["darwin", "linux", "win32"],
    "parameters": ["webDriverBiDi"],
    "expectations": ["FAIL"]
  },
  {
    "comment": "Firefox CDP doesn't support fetching post data - PuppeteerSharp-specific test matching upstream pattern for 'should work'",
    "testIdPattern": "[network.spec] network Request.postData should work plain text",
    "platforms": ["darwin", "linux", "win32"],
    "parameters": ["cdp", "firefox"],
    "expectations": ["SKIP"]
  },
  {
    "comment": "Firefox CDP doesn't support fetching post data - PuppeteerSharp-specific test matching upstream pattern for 'should work'",
    "testIdPattern": "[network.spec] network Request.postData should work with low surrogate",
    "platforms": ["darwin", "linux", "win32"],
    "parameters": ["cdp", "firefox"],
    "expectations": ["SKIP"]
  }
]
